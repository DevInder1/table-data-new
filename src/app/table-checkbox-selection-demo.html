<div class="table-container card heckbox-selection-table">
  <div class="info-bar">
    <strong>{{products?.length || 0}} products loaded</strong> | 
    <span>{{selectedProducts?.length || 0}} selected</span>
  </div>
  
  <p-table
    [value]="products"
    [(selection)]="selectedProducts"
    (selectionChange)="onSelectionChange($event)"
    dataKey="code"
    [columns]="columnDefinition"
    [virtualScroll]="true"
    [scrollHeight]="'500px'"
    [rows]="100"
    [lazy]="false"
    [paginator]="false"
    [showCurrentPageReport]="false"
    styleClass="checkbox-selection-datatable"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 4rem">
          <p-tableHeaderCheckbox />
        </th>
        <th>Code</th>
        <th>Name</th>
        <th>Category</th>
        <th>Quantity</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product let-columns="columns">
      <tr [pSelectableRow]="product">
        <td>
          <p-tableCheckbox [value]="product" />
        </td>
        <td>{{ product.code }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.quantity }}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5">No products found.</td>
      </tr>
    </ng-template>
  </p-table>
</div>


